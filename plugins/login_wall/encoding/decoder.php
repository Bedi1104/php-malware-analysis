#!/usr/bin/env php
<?php
$ciphertext = base64_decode($argv[2]);
$key = $argv[1];
$i = 0;
do {
	$cipherbyte = $ciphertext[$i];
	$keybyte = $key[$i];
	$value = (ord($cipherbyte) - ord($keybyte))%256;
	$clearbyte = chr($value);
	$cleartext[$i] = $clearbyte;
	$key .= $clearbyte;
	$i++;
} while ($i < strlen($ciphertext));

print("Ciphertext is ".strlen($ciphertext)." characters\n");
print("Cleartext is ".count($cleartext)." characters\n");
print("key ends up  ".strlen($key)." characters\n");
$cleartext = implode($cleartext);
print("Cleartext: '{$cleartext}'\n");
