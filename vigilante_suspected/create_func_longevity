#!/bin/bash

echo '|Serial Number|Initial appearance|Final appearance|'
echo '|-------------|------------------|----------------|'
ls -1 renamed_functions/*/R*php |
sed -e 's/renamed_functions\///' -e 's/\//	/' -e 's/R//' -e 's/.php//' |
sort -k2.1n -k1.1 | sed 's/\(....-..-..\)./\1/' |
awk 'NR==1 { firstdate=$1; sn=$2 } \
	NR > 1 { if ($2 == sn) { lastdate = $1; } \
			if ($2 != sn) {printf "|%s|%s|%s|\n", sn, firstdate, lastdate;  firstdate=$1; sn=$2; lastdate=""}\
			} \
	END { printf "|%s|%s||\n", sn, firstdate } \
'
