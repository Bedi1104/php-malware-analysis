<?php

$body = "{well|oh} {hello|hey|hey there|hello there} {mister|sir|cutie}{,|..|...} if {your|you're|ur} {single|still single|willing|up to it|down for it} and {free|avail|available|around} we {could|can} meetup for fun?? [FTEIL]";

function alter_macros($content)
{
    preg_match_all('#{(.*)}#Ui', $content, $matches);
    for($i = 0; $i < count($matches[1]); $i++)
    {
        $ns = explode("|", $matches[1][$i]);
        $c2 = count($ns);
        $rand = rand(0, ($c2 - 1));
        $content = str_replace("{".$matches[1][$i]."}", $ns[$rand], $content);
    }
    return $content;
}
$newbody = alter_macros($body);

print $newbody."\n";
